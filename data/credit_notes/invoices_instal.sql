CREATE TABLE IF NOT EXISTS invoices (
  id             INT(11) UNSIGNED PRIMARY KEY AUTO_INCREMENT      NOT NULL,
  invoice_number VARCHAR(25)                                      NOT NULL,
  address        VARCHAR(255)                                     NOT NULL,
  to_address     VARCHAR(255)                                     NOT NULL,
  account_number VARCHAR(15)    DEFAULT NULL,
  stamp_duty     DECIMAL(10, 2) DEFAULT NULL,
  currency       VARCHAR(10)                                      NOT NULL,
  reference      VARCHAR(255)                                     NOT NULL,
  created_at     DATETIME                                         NOT NULL,
  updated_at     DATETIME                                         NOT NULL,
  `status`       TINYINT(4) DEFAULT 1                             NOT NULL,
  KEY k_account_number(`account_number`),
  KEY k_address(`address`),
  KEY k_to_address(`to_address`),
  KEY k_currency(`currency`),
  KEY k_status(`status`),
  KEY k_invoice_number(`invoice_number`),
  UNIQUE u_invoice_number(`invoice_number`),
  CONSTRAINT f_invoices_status_status FOREIGN KEY (`status`) REFERENCES `status` (`id`)
);

CREATE TABLE IF NOT EXISTS invoice_parcels (
  id             INT(11) UNSIGNED PRIMARY KEY AUTO_INCREMENT NOT NULL,
  invoice_number VARCHAR(25)                                 NOT NULL,
  waybill_number VARCHAR(25)                                 NOT NULL,
  discount       DOUBLE                                      NOT NULL,
  net_amount     DECIMAL(10, 2)                              NOT NULL,
  created_at     DATETIME                                    NOT NULL,
  updated_at     DATETIME                                    NOT NULL,
  `status`         TINYINT(4) DEFAULT 1                        NOT NULL,
  KEY k_invoice_number(`invoice_number`),
  KEY k_waybill_number(`waybill_number`),
  KEY k_created_at(`created_at`),
  KEY k_updated_at(`updated_at`),
  KEY k_status(`status`),
  UNIQUE u_waybill_number(`waybill_number`),
  CONSTRAINT f_ip_invoices_inv_no FOREIGN KEY(`invoice_number`) REFERENCES invoices(`invoice_number`),
  CONSTRAINT f_ip_parcel_wbill_no FOREIGN KEY(`waybill_number`) REFERENCES parcel(`waybill_number`),
  CONSTRAINT f_ip_status_status FOREIGN KEY(`status`) REFERENCES `status`(`id`)
);